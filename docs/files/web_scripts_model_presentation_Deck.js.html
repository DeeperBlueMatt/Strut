<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>web\scripts\model\presentation\Deck.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/common.collections.LinkedList.html">common.collections.LinkedList</a></li>
            
                <li><a href="..&#x2F;classes/common.FileUtils.html">common.FileUtils</a></li>
            
                <li><a href="..&#x2F;classes/common.Math2.html">common.Math2</a></li>
            
                <li><a href="..&#x2F;classes/model.common_application.AutoSave.html">model.common_application.AutoSave</a></li>
            
                <li><a href="..&#x2F;classes/model.common_application.UndoHistory.html">model.common_application.UndoHistory</a></li>
            
                <li><a href="..&#x2F;classes/model.editor.button_bar.ButtonBarModel.html">model.editor.button_bar.ButtonBarModel</a></li>
            
                <li><a href="..&#x2F;classes/model.presentation.Deck.html">model.presentation.Deck</a></li>
            
                <li><a href="..&#x2F;classes/ServiceRegsitry.html">ServiceRegsitry</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/common.html">common</a></li>
            
                <li><a href="..&#x2F;modules/common.collections.html">common.collections</a></li>
            
                <li><a href="..&#x2F;modules/model.common_application.html">model.common_application</a></li>
            
                <li><a href="..&#x2F;modules/model.editor.html">model.editor</a></li>
            
                <li><a href="..&#x2F;modules/model.presentation.html">model.presentation</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: web\scripts\model\presentation\Deck.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;&#x2F; Generated by CoffeeScript 1.3.3
&#x2F;**
* @module model.presentation
* @author Matt Crinklaw-Vogt
*
*&#x2F;

define([&quot;common&#x2F;Calcium&quot;, &quot;.&#x2F;SlideCollection&quot;, &quot;.&#x2F;Slide&quot;, &quot;model&#x2F;common_application&#x2F;UndoHistory&quot;, &quot;model&#x2F;commands&#x2F;SlideCommands&quot;], function(Backbone, SlideCollection, Slide, UndoHistory, SlideCommands) {
  &#x2F;**
  	This represents a slide deck.  It has a title, a currently active
  	slide, a collection of slides, the filename on &quot;disk&quot; and
  	the overarching presentation background color.
  	@class model.presentation.Deck
  *&#x2F;
  return Backbone.Model.extend({
    initialize: function() {
      var slides;
      this.undoHistory = new UndoHistory(20);
      this.set(&quot;slides&quot;, new SlideCollection());
      slides = this.get(&quot;slides&quot;);
      slides.on(&quot;add&quot;, this._slideAdded, this);
      slides.on(&quot;remove&quot;, this._slideRemoved, this);
      slides.on(&quot;reset&quot;, this._slidesReset, this);
      return this._lastSelected = null;
    },
    &#x2F;**
    		Creates a new slide and adds it as the last slide in the deck.
    		The newly created slide is set as the active slide in the deck.
    		@method newSlide
    		*
    *&#x2F;

    newSlide: function() {
      var createCmd, slide;
      createCmd = new SlideCommands.Create(this);
      slide = createCmd[&quot;do&quot;]();
      this.undoHistory.push(createCmd);
      return slide;
    },
    set: function(key, value) {
      if (key === &quot;activeSlide&quot;) {
        this._activeSlideChanging(value);
      }
      return Backbone.Model.prototype.set.apply(this, arguments);
    },
    &#x2F;**
    		Method to import an existing presentation into this deck.
    		TODO: this method should be a bit less brittle.  If new properties are added
    		to a deck, this won&#x27;t set them.
    		@method import
    		@param {Object} rawObj the &quot;json&quot; representation of a deck
    		*
    *&#x2F;

    &quot;import&quot;: function(rawObj) {
      var activeSlide, slides;
      slides = this.get(&quot;slides&quot;);
      activeSlide = this.get(&quot;activeSlide&quot;);
      if (activeSlide != null) {
        activeSlide.unselectComponents();
      }
      this.set(&quot;activeSlide&quot;, null);
      this.set(&quot;background&quot;, rawObj.background);
      this.set(&quot;fileName&quot;, rawObj.fileName);
      return slides.reset(rawObj.slides);
    },
    _activeSlideChanging: function(newActive) {
      var lastActive;
      lastActive = this.get(&quot;activeSlide&quot;);
      if (newActive === lastActive) {
        return null;
      }
      if (lastActive != null) {
        lastActive.unselectComponents();
        lastActive.set({
          active: false,
          selected: false
        });
      }
      if (newActive != null) {
        return newActive.set({
          selected: true,
          active: true
        });
      }
    },
    _slideAdded: function(slide, collection) {
      this.set(&quot;activeSlide&quot;, slide);
      return this._registerWithSlide(slide);
    },
    _slideDisposed: function(slide) {
      return slide.off(null, null, this);
    },
    _slideRemoved: function(slide, collection, options) {
      console.log(&quot;Slide removed&quot;);
      if (this.get(&quot;activeSlide&quot;) === slide) {
        if (options.index &lt; collection.length) {
          this.set(&quot;activeSlide&quot;, collection.at(options.index));
        } else if (options.index &gt; 0) {
          this.set(&quot;activeSlide&quot;, collection.at(options.index - 1));
        } else {
          this.set(&quot;activeSlide&quot;, null);
        }
      }
      return slide.dispose();
    },
    _slidesReset: function(newSlides, options, oldSlides) {
      var _this = this;
      oldSlides.forEach(function(slide) {
        return slide.dispose();
      });
      return newSlides.forEach(function(slide) {
        _this._registerWithSlide(slide);
        if (slide.get(&quot;active&quot;)) {
          return slide.trigger(&quot;change:active&quot;, slide, true);
        } else if (slide.get(&quot;selected&quot;)) {
          return slide.set(&quot;selected&quot;, false);
        }
      });
    },
    _slideActivated: function(slide, value) {
      if (value) {
        return this.set(&quot;activeSlide&quot;, slide);
      }
    },
    _slideSelected: function(slide, value) {
      if ((this._lastSelected != null) &amp;&amp; value &amp;&amp; this._lastSelected !== slide) {
        this._lastSelected.set(&quot;selected&quot;, false);
      }
      return this._lastSelected = slide;
    },
    _registerWithSlide: function(slide) {
      slide.on(&quot;change:active&quot;, this._slideActivated, this);
      slide.on(&quot;change:selected&quot;, this._slideSelected, this);
      return slide.on(&quot;dispose&quot;, this._slideDisposed, this);
    },
    &#x2F;**
    		Removes the specified slide from the deck
    		@method removeSlide
    		@param {model.presentation.Slide} slide the slide to remove.
    		*
    *&#x2F;

    removeSlide: function(slide) {
      this.undoHistory.pushdo(new SlideCommands.Remove(this, slide));
      return slide;
    },
    addSlide: function(slide) {
      return this.get(&quot;slides&quot;).add(slide);
    },
    undo: function() {
      return this.undoHistory.undo();
    },
    redo: function() {
      return this.undoHistory.redo();
    }
  });
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
